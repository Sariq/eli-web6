
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
<style type="text/css">

#wrapper {
    width: 100%;

}
#page-wrapper {

  
}

@media(min-width:768px) {
    #page-wrapper {
 
    
    }
}

.chat {
     margin: 0;
 padding: 0; 
	list-style: none;
    position:fixed;
      width: 356px;
}

.chat li {
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 1px dotted #999;
}

.chat li.left .chat-body {
    margin-left: 60px;
}

.chat li.right .chat-body {
    margin-right: 60px;
}

.chat li .chat-body p {
    margin: 0;
}

.panel .slidedown .glyphicon,
.chat .glyphicon {
    margin-right: 5px;
}

.chat-panel .panel-body {
    height: 350px;
    overflow-y: scroll;
}

.login-panel {
    margin-top: 25%;
}

.flot-chart {
    display: block;
    height: 400px;
}

.flot-chart-content {
    width: 100%;
    height: 100%;
}
  




#fixed {
    bottom: 0;
    left: 15%;
    margin-left: -200px;
    overflow: hidden;
    padding: 0 5px;
    position: fixed;
    width: 400px;
    z-index: 1001;
}

.fixedHeader {

    /*width: 395px;*/   
    font-weight:700;
    font-size:15px;
}

.fixedContent {
    background: none repeat scroll 0 0 #ffffff;
    border-left: 1px solid #b2b2b2;
    border-right: 1px solid #b2b2b2;
    margin: 0 auto;   
    width: 400px;
    height:300px;
    overflow: auto;
}

.userinput{
    width: 390px;
    height:16px;
    outline:none;
    display:block;
    resize:none;
    padding:5px;    
}

.messages{
    color: #333;
    line-height: 1.28;
    padding:5px;
    margin-left:70px;
    font-size: 14px;
    display: block;
}

.userwrap{
    position:relative;
}

.user{
    padding: 5px ;
    font-size:12px;
    color:#888;
    font-weight:700;
    position:absolute;
    left:0; top:0;
}






</style>

       <div  ng-show="chat.adminOnlineStatus"   id="fixed" >
    
            <div class="row">
               
                <div class="">

                    <!-- /.panel -->

                    <!-- /.panel -->
                    <div class="chat-panel panel panel-primary">
                        <div class="panel-heading fixedHeader" >
                            <i class="fa fa-comments fa-fw"></i>
                            Chat 
                           <span class="pull-right"><button class="btn btn-danger btn-xs" ng-if="chat.GuID!=null" ng-click="chat.myUnLoad()">End Chat</button></span>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="row">
                        <div class="panel-body fixedContent" scroll-glue>
                            <ul class="chat">
                                <li  ng-repeat="message in chat.chatMessages" >
                                    <span class="left clearfix">
                                    
                                    <div class="chat-body clearfix">
                                 
                                        <div class="header">
                                            <small class=" text-muted">
                                                <i class="fa fa-clock-o fa-fw"></i> {{message.messageUpdateT}}</small>
                                              <span ng-if="message.type=='web'"><strong class="pull-right primary-font" style="color: blue">User</strong></span>
                                    <span ng-if="message.type=='admin'"><strong class="pull-right primary-font" style="color: orange">Admin</strong></span>
                                        </div>
                                        <p class="text-right">
                                            {{message.messageContent}}
                                        </p>
                                    </div>
                                        </span>

                                </li>
 
                            </ul>
                        </div></div>
                        <!-- /.panel-body -->
                        <div class="panel-footer" >
                            <div class="input-group"  >
                                <input  ng-keypress="($event.which === 13)?chat.myClick():0" ng-if="chat.GuID!=null" ng-model="chat.myMessage" id="btn-input" type="text" class="form-control input-sm" style="direction:RTL;" placeholder="הכנס הודעה..." />
                                <span class="input-group-btn">
                                    <button ng-if="chat.GuID!=null" ng-click="chat.myClick()" class="btn btn-warning btn-sm" id="btn-chat">
                                        Send
                                    </button>
                                </span>
                               
                            </div>
                                      <button ng-if="chat.GuID==null" ng-click="chat.register()" class="btn btn-info btn-block" id="Button1">
                                        Register
                                    </button>
                        </div>
                        <!-- /.panel-footer -->
                    </div>
                    <!-- /.panel .chat-panel -->
                </div>
                <!-- /.col-lg-4 -->
            </div>
            <!-- /.row -->
                </div>
        <!-- /#page-wrapper -->

 

	
	<script>

	    var toggle = false;
	    var user = "jQuery404";
	    var searchBoxText = "Type here...";
	    var fixIntv;
	    var fixedBoxsize = $('#fixed').outerHeight() + 'px';
	    var Parent = $("#fixed"); // cache parent div
	    var Header = $(".fixedHeader"); // cache header div
	    var Chatbox = $(".userinput"); // cache header div
	    Parent.css('height', '40px');

	    Header.click(function () {
	        toggle = (!toggle) ? true : false;
	        if (toggle) {
	            Parent.animate({ 'height': '440px' }, 300);
	        }
	        else {
	            Parent.animate({ 'height': '40px' }, 300);
	        }

	    });

	    Chatbox.focus(function () {
	        $(this).val(($(this).val() == searchBoxText) ? '' : $(this).val());
	    }).blur(function () {
	        $(this).val(($(this).val() == '') ? searchBoxText : $(this).val());
	    }).keyup(function (e) {
	        var code = (e.keyCode ? e.keyCode : e.which);
	        if (code == 13) {
	            $('.fixedContent').append("<div class='userwrap'><span class='user'>" + user + "</span><span class='messages'>" + $(this).val() + "</span></div>");
	            event.preventDefault();

	            $(".fixedContent").scrollTop($(".fixedContent").height());
	            $(this).val('');
	        }

	    });

	    $('#fixed').on('scroll', function (event) {
	        element = $(this);
	        console.log(element)
	    });
	</script>
	